let targetDate=new Date("2024-05-13T00:00:00");const maxBounceSpeed=2e3;let maxBouncingDays;const currentDate=new Date;let pauseTracker,bouncingDatesContainer,countdownInterval,bounceSpeed=100,overLoad=!1,bouncingDates=[],countUnits=0;const timeUnits={dayUnits:"days",weekUnits:"weeks",monthUnits:"months"},urlParams={month:"month",pickDate:"pickDate",maxBounce:"maxBounce"};let bouncingUnits=timeUnits.dayUnits,pickDateVal=getUrlParameter(urlParams.pickDate),datePickerIsShowing=!0;const speedIncrements={slow:25,increase:25};function setTimeUnitBtnCounters(){const e=document.getElementById("daysCounter"),t=document.getElementById("weeksCounter"),n=document.getElementById("monthsCounter");e.textContent=countUnits,t.textContent=countUnits,n.textContent=countUnits,bouncingUnits==timeUnits.dayUnits?(showElement(e.id),hideElement(t.id),hideElement(n.id)):bouncingUnits==timeUnits.weekUnits?(showElement(t.id),hideElement(e.id),hideElement(n.id)):bouncingUnits==timeUnits.monthUnits&&(showElement(n.id),hideElement(e.id),hideElement(t.id))}function setCountDown(){clearInterval(countdownInterval),countdownInterval=setInterval(updateCountdown,1e3)}function updateCountdown(){const e=targetDate-new Date;if(e<=0)return document.querySelector(".countdown").textContent="00:00:00:00",void clearInterval(countdownInterval);const t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);document.getElementById("days").textContent=t.toString().padStart(2,"0"),document.getElementById("hours").textContent=n.toString().padStart(2,"0"),document.getElementById("minutes").textContent=o.toString().padStart(2,"0"),document.getElementById("seconds").textContent=i.toString().padStart(2,"0")}function createBouncingDates(){const e=targetDate-currentDate;if(e<=0)return;const t=document.createDocumentFragment();!function n(){if(bouncingDates.length>=maxBouncingDays)return;let o;if(bouncingUnits===timeUnits.dayUnits){const t=Math.floor(e/864e5);if(countUnits=t,bouncingDates.length>=t)return;const n=new Date(currentDate);n.setDate(currentDate.getDate()+bouncingDates.length+1),o=`${n.getMonth()+1}/${n.getDate()}/${n.getFullYear().toString().slice(-2)}`}else if(bouncingUnits===timeUnits.monthUnits){const t=Math.floor(e/2592e6);if(countUnits=t,bouncingDates.length>=t)return;const n=new Date(currentDate);n.setMonth(currentDate.getMonth()+bouncingDates.length+1),o=(n.getMonth()+1).toString()}else if(bouncingUnits===timeUnits.weekUnits){const t=Math.floor(e/6048e5);if(countUnits=t,bouncingDates.length>=t)return;const n=new Date(currentDate);n.setDate(currentDate.getDate()+7*bouncingDates.length);const i=new Date(n);i.setDate(n.getDate()+6),o=`${n.getMonth()+1}/${n.getDate()}-${i.getMonth()+1}/${i.getDate()}/${i.getFullYear()}`}const i=document.createElement("span");i.className="bounce",i.textContent=o;let a={element:i,x:randomIntFromInterval(0,bouncingDatesContainer.offsetWidth-i.offsetWidth),y:randomIntFromInterval(0,bouncingDatesContainer.offsetHeight-i.offsetHeight),angle:Math.random()*Math.PI*2};i.style.left=`${a.x}px`,i.style.top=`${a.y}px`,bouncingDates.push(a),t.appendChild(i),n()}(),bouncingDatesContainer.appendChild(t),addQtyClass(bouncingDates.length)}function addQtyClass(e){if(e<10&&"weeks"!=bouncingUnits)for(const e of document.querySelectorAll(".bounce"))e.classList.add("small-amount"),e.style.width="40px";else if(e<70)for(const e of document.querySelectorAll(".bounce"))e.classList.add("med-amount")}function startBounceAnimation(e){let t=null;requestAnimationFrame((function n(o){t||(t=o);const i=o-t;t=o;let a=e.x,s=e.y;a+=Math.cos(e.angle)*bounceSpeed*i/1e3,s+=Math.sin(e.angle)*bounceSpeed*i/1e3;const c=bouncingDatesContainer.offsetWidth-e.element.offsetWidth,d=bouncingDatesContainer.offsetHeight-e.element.offsetHeight-40;(a<1||a>c)&&(e.angle=Math.PI-e.angle),(s<1||s>d)&&(e.angle=-e.angle),a=Math.max(1,Math.min(c,a)),s=Math.max(1,Math.min(d,s)),e.element.style.left=`${a}px`,e.element.style.top=`${s}px`,e.x=a,e.y=s,requestAnimationFrame(n)}))}function setDatePickerHandler(){function e(){const e=this.value;targetDate=new Date(`${e}T00:00:00`),updateBouncingDates()}document.querySelectorAll(".date-picker").forEach((t=>{t.addEventListener("change",e)}))}function setDatePickerMin(){let e=formattedNow(),t=dateAddition("day",1,e);console.log(document.getElementById("datePicker")),document.getElementById("datePicker").setAttribute("min",t)}function updateBouncingDates(){bouncingDates.forEach((e=>{const t=e.element.parentElement;t&&t.removeChild(e.element)})),bouncingDates=[],countUnits=0,createBouncingDates(),bouncingDates.forEach((e=>{startBounceAnimation(e)})),setTimeUnitBtnCounters()}function setBtnHandlers(){const e=document.getElementById("speedUpBtn"),t=document.getElementById("slowDownBtn"),n=document.getElementById("pauseBtn"),o=document.getElementById("dayUnitBtn"),i=document.getElementById("weekUnitBtn"),a=document.getElementById("monthUnitBtn"),s=document.getElementById("datePickerBtn");let c,d,r=0,u={speedUp:!1,slowDown:!1,pause:!1};function l(){u.speedUp||(u.speedUp=!0,c=setInterval((function(){bounceSpeed<2e3&&(bounceSpeed+=speedIncrements.increase)}),100))}function m(){u.slowDown||(u.slowDown=!0,d=setInterval((function(){bounceSpeed>0?bounceSpeed-=speedIncrements.slow:(document.querySelector("body").classList.add("spin-joke"),bounceSpeed=0)}),100))}function g(){u.pause||(0!==bounceSpeed?(r=bounceSpeed,bounceSpeed=0):bounceSpeed=r)}function h(){clearInterval(c),clearInterval(d),u.speedUp=!1,u.slowDown=!1,bounceSpeed>=2e3&&(showJokeOverload(),setTimeout((function(){hideJokeOverload()}),6e3),bounceSpeed=2e3)}e.addEventListener("mousedown",l),e.addEventListener("touchstart",(function(e){e.preventDefault(),l()})),e.addEventListener("mouseup",h),e.addEventListener("touchend",h),t.addEventListener("mousedown",m),t.addEventListener("touchstart",(function(e){e.preventDefault(),m()})),t.addEventListener("mouseup",h),t.addEventListener("touchend",h),n.addEventListener("click",g),n.addEventListener("touchstart",(function(e){e.preventDefault(),g()})),o.addEventListener("click",(function(){bouncingUnits!=timeUnits.dayUnits&&(bouncingUnits=timeUnits.dayUnits,updateBouncingDates(),setTimeUnitBtnCounters())})),i.addEventListener("click",(function(){bouncingUnits!=timeUnits.weekUnits&&(bouncingUnits=timeUnits.weekUnits,updateBouncingDates(),setTimeUnitBtnCounters())})),a.addEventListener("click",(function(){bouncingUnits!=timeUnits.monthUnits&&(bouncingUnits=timeUnits.monthUnits,updateBouncingDates(),setTimeUnitBtnCounters())})),s.addEventListener("click",handleShowDayPickerClick),s.addEventListener("touchstart",(function(e){e.preventDefault(),handleShowDayPickerClick()}))}function handleShowDayPickerClick(){0==datePickerIsShowing?(showDatePicker(),datePickerIsShowing=!0):1==datePickerIsShowing&&(showDatePicker(),datePickerIsShowing=!1)}function changeBouncingUnit(e){bouncingUnits=e}function showJokeOverload(){const e=document.body;if(!e)return void console.error("The body element does not exist.");e.classList.add("overload");const t=document.createElement("style");t.type="text/css",t.id="overloadStyle",t.textContent="body.overload { background: white !important; }",document.head.appendChild(t);document.querySelectorAll("body.overload > *").forEach((e=>{e.style.display="none"}));const n=getFakeCrashDiv(),o=document.querySelector(".overload");o?o.appendChild(n):console.error("Could not find 'body.overload' for appending the fake crash div."),setTimeout((function(){n?n.innerHTML+="<div style='font-size: x-large' id='timedNote'>Just Kidding &#128540;</div>":console.error("Fake crash div is missing.")}),3e3),overLoad=!0}function hideJokeOverload(){document.querySelectorAll("body.overload > *").forEach((e=>{e.style.display=""})),document.body.classList.remove("overload");const e=document.getElementById("overloadStyle");e&&e.remove();const t=document.getElementById("crashDiv");t&&t.remove();const n=document.getElementById("timedNote");n&&n.remove()}function getFakeCrashDiv(){const e=document.createElement("div");return e.id="crashDiv",e.textContent="{fatal error: 720, webserver has crashed. Contact the admin for further assistance}",e}function showDatePicker(){if(0==datePickerIsShowing||pickDateVal)datePicker.classList.remove("hidden"),setDatePickerMin(),setDatePickerHandler();else{const e=document.getElementById("datePicker");e&&e.classList.add("hidden")}}function setMaxBouncing(){let e=getUrlParameter(urlParams.maxBounce);e?(e<500||e>0)&&(maxBouncingDays=parseInt(e)):maxBouncingDays=100}function setHandleResizeEvent(){window.addEventListener("resize",handleResize)}document.addEventListener("DOMContentLoaded",(function(){setBtnHandlers(),showDatePicker(),setMaxBouncing(),setHandleResizeEvent(),handleResize(),bouncingDatesContainer=document.querySelector(".bouncing-dates"),setCountDown(),createBouncingDates(),setTimeUnitBtnCounters(),setTheme(),bouncingDates.forEach((e=>{startBounceAnimation(e)}))}));